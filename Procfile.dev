# Core and Narrative APIs require NEXUS_SLOT to be set (1-5)
core: bash -lc 'NEXUS_SLOT=${NEXUS_SLOT:-1}; CORE_API_PORT=${CORE_API_PORT:-8001}; NEXUS_SLOT="${NEXUS_SLOT}" poetry run uvicorn nexus.api.core:app --reload --host 127.0.0.1 --port ${CORE_API_PORT}'
narrative: bash -lc 'NEXUS_SLOT=${NEXUS_SLOT:-1}; NARRATIVE_API_PORT=${NARRATIVE_API_PORT:-8002}; NEXUS_SLOT="${NEXUS_SLOT}" poetry run uvicorn nexus.api.narrative:app --reload --host 127.0.0.1 --port ${NARRATIVE_API_PORT}'

# UI also needs NEXUS_SLOT for backend API calls
ui: bash -lc 'NEXUS_SLOT=${NEXUS_SLOT:-1}; APP_PORT=${APP_PORT:-5001}; CORE_API_PORT=${CORE_API_PORT:-8001}; NARRATIVE_API_PORT=${NARRATIVE_API_PORT:-8002}; NEXUS_SLOT="${NEXUS_SLOT}" PORT="${APP_PORT}" CORE_API_PORT="${CORE_API_PORT}" NARRATIVE_API_PORT="${NARRATIVE_API_PORT}" npm --prefix ui run dev'

# Mock OpenAI server for TEST model (returns cached data with 1500ms delay)
mock_openai: poetry run uvicorn nexus.api.mock_openai:app --reload --host 127.0.0.1 --port 5102
